# frozen_string_literal: true

# rubocop:disable all

# Ensure all commits have ticket number
unless git.commits.all? { |c| c.message =~ /^((IMC-[\d]+)|chore|(hot)?fix)/i }
  failure 'Please add JIRA Ticket to commits or mark properly as hotfix/chore'
end

# Disallow Draft commits
failure 'Please rebase to remove work in progress commits' if git.commits.any? { |c| c.message =~ /\Awip/i }

# Prevent merging PRs with commits intended to be rebased
if git.commits.any? { |c| c.message.include?('fixup!') || c.message.include?('squash!') }
  failure('This PR contains commits marked as squash or fixup. Please perform an interactive rebase to apply the changes.')
end
