.. _pricing_uploader:
=======  ========
Pricing  uploader
=======  ========

Technical document to build the pricing uploader.

Target Model:
=============

Pricings::Pricing

Columns:
========

+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
|        Header        | sanitizer |   validations    | required |  type  | unique | alternative_keys  |     fallback      |         Sections         |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+======================+===========+==================+==========+========+========+===================+===================+==========================+
| group_id             | text      | optional_string  | false    | object | false  |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| group_name           | text      | optional_string  | false    | object | false  |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| effective_date       | date      | date             | false    | object | false  |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| expiration_date      | date      | date             | false    | object | false  |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| origin_locode        | text      | optional_locode  | false    | object | false  |                   |                   | Itinerary                |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| destination_locode   | text      | optional_locode  | false    | object | false  |                   |                   | Itinerary                |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| origin               | text      | optional_string  | false    | object | false  |                   |                   | Itinerary                |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| destination          | text      | optional_string  | false    | object | false  |                   |                   | Itinerary                |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| country_origin       | text      | optional_string  | false    | object | false  |                   |                   | Itinerary                |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| origin_terminal      | text      | optional_string  | false    | object | false  |                   |                   | Itinerary                |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| destination_terminal | text      | optional_string  | false    | object | false  |                   |                   | Itinerary                |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| country_destination  | text      | optional_string  | false    | object | false  |                   |                   | Itinerary                |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| mode_of_transport    | text      | string           | false    | object | false  | mot               |                   | Itinerary, TenantVehicle |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| carrier              | text      | string           | false    | object |        |                   | organization.slug | Carrier, RoutingCarrier  |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| service              | text      | string           | false    | object |        | service_level     | standard          | TenantVehicle            |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| cargo_class          | text      | string           | true     | object |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| internal             | boolean   | boolean          | false    | object | false  |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| transshipment        | text      | optional_string  | false    | object |        | transshipment_via |                   | Itinerary                |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| wm_rate              | decimal   | optional_numeric | false    | object |        |                   | wm_ratio          |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| vm_rate              | decimal   | optional_numeric | false    | object |        |                   | vm_ratio          |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| fee_min              | decimal   | optional_numeric | false    | object |        | min               |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| fee_name             | text      | string           | false    | object |        |                   |                   | ChargeCategory           |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| fee_code             | downcase  | string           | false    | object |        |                   |                   | ChargeCategory           |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| currency             | upcase    | currency         | true     | object |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| rate                 | decimal   | numeric          | false    | object |        | fee               |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| rate_basis           | text      | string           | false    | object |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| range_min            | decimal   | optional_numeric | false    | object |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| range_max            | decimal   | optional_numeric | false    | object |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| base                 | decimal   | optional_numeric | false    | object |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+
| remarks              | text      | optional_string  | false    | object |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
|                      |           |                  |          |        |        |                   |                   |                          |
+----------------------+-----------+------------------+----------+--------+--------+-------------------+-------------------+--------------------------+

Row Validations:
================

+--------------------+--------------------+
|      Columns       |       Logic        |
+====================+====================+
| ["effective_date", | "effective_date" < |
| "expiration_date"] | "expiration_date"  |
+--------------------+--------------------+

Prerequisite:
=============

-  "TenantVehicle"

-  "Itinerary"

-  "ChargeCategory"

Dynamic Columns:
================

+--------------------------------+
| Including Excluding Header_row |
+--------------------------------+

--------------

Extractors:
===========

-  "Carrier"

-  "TenantVehicle"

-  "RouteHubs"

-  "Itinerary"

-  "ChargeCategory"

-  "Group"

-  "RateBasis"

Operations:
===========

-  DynamicFees

Conflicts
=========

+-------------------+----------------------------+
|       Model       |       Conflict keys        |
+===================+============================+
| Pricings::Pricing | itinerary_id, cargo_class, |
|                   | organization_id, group_id, |
|                   | tenant_vehicle_id          |
+-------------------+----------------------------+


Formatter
=========

Pricings

Model Importer:
===============

+-------------------+---------------------+
|       Model       |       options       |
+===================+=====================+
| Pricings::Pricing | { recursive: true } |
+-------------------+---------------------+
