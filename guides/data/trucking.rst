Trucking
=========

Trucking rates are defined between a Hub and a Location and are characterised by their cargo_class, truck_type,
Group, TenantVehicle and validity date. The Trucking sheet upload is divided into three separate sheet formats each of which
must have at least one valid sheet present in the upload.

Zone Sheet
----------

The Zone sheet comes in three flavours: Postal Code, Distance and City based sheets.

All flavours require these two columns (usually as first and last columns):

:ZONE:
  **(required)** Numbered 'zones' that are used to connect to the Rates in the Rates sheets.

:COUNTRY_CODE:
  **(required)** Two letter ISO code for the country the zone is located in.

Postal Code Flavour requires these two headers to be present:

:POSTAL_CODE:
  **(required)** Individual Postal code to attach the trucking rate to.

:RANGE:
  **(required)** Range of postal codes for the zone. Top and bottom values of the range separated by a dash.

Distance Flavour requires these two headers to be present.

:DISTANCE:
  **(required)** Number of km of driving distance we want this rate to apply to.

:RANGE:
  **(required)** Range of km of driving distance for the zone. Top and bottom values of the range separated by a dash


City Flavour requires these two headers to be present:

:CITY:
  **(required)** Name of the city or area you wish to attach the rate to.

:PROVINCE:
  **(required)** The containing administrative area of the city in question.

Fees Sheet
----------
The Fees sheet requires all of these columns to be present.

These columns are used to attach the fee to the correct rate. The values in these must match the ones in the Rate sheet

:TRUCK_TYPE:
  **(required)** The truck type of the rate you want to attach this fee to.

:DIRECTION:
  **(required)** The direction of the rate you want to attach this fee to.

:CARGO_CLASS:
  **(required)** The cargo_class of the rate you want to attach this fee to. If left blank this will be applied to all cargo classes.

:ZONE:
  **(required)** The zone of the rate you want to attach this fee to. If left blank this will be applied to all zones.

:SERVICE:
  **(required)** The service of the rate you want to attach this fee to. Must be paired with the CARRIER column.
    If left blank this will be applied to all service and carrier pairs.

:CARRIER:
  **(required)** The CARRIER of the rate you want to attach this fee to. Must be paired with the SERVICE column.
    If left blank this will be applied to all service and carrier pairs.


The following columns define the actual fee:

:FEE:
  **(required)** Name of the fee.

:MOT:
  **(required)** Not needed, to be deprecated.

:FEE_CODE:
  **(required)** Code to be used when rendering the charge. Must match ChargeCategory code.

:CURRENCY:
  **(required)** The currency the fee should be charged in. Three letter ISO codes only.

:RATE_BASIS:
  **(required)** The RATE_BASIS of the fee.

:TON:
  **(required)** Per Ton value of the rate.

:CBM:
  **(required)** Per CBM value of the rate.

:ITEM:
  **(required)** Per unit value of the rate.

:SHIPMENT:
  **(required)** Per shipment value of the rate.

:BILL:
  **(required)** Per Bill of Lading value of the rate.

:CONTAINER:
  **(required)** Per container (same as per ITEM) value of the rate.

:WM:
  **(required)** Per weight measure value of the rate.

:MINIMUM:
  **(required)** The minimum amount the fee can charge.

:RANGE_MIN:
  **(required)** The lower end of the range for this fee.

:RANGE_MAX:
  **(required)** The upper end of the range for this fee.


Rates Sheet
------------
The Rates sheet is a very complex sheet with many distinct sections that combine to build the rates.

The top row defines the group of rates being generated by the sheet.
These columns are used to attach the fee to the correct rate. The values in these must match the ones in the Rate sheet.
The required headers are:

:CITY:
**(required)** Name of the hub. Not currently used for anything.

:CURRENCY:
**(required)** The currency the fee should be charged in. Three letter ISO codes only.

:CBM_RATIO:
**(required)** Ratio of cubic meters to kilograms for calculating chargeable weight

:SCALE:
**(required)** Defines what are the valid rates 'groupings' present in row 3.
  One of [cbm_kg, unit_per_km, unit_in_kg, unit, cbm, wm, kg].

:RATE_BASIS:
  **(required)** The RATE_BASIS of the fee.

:BASE:
  **(required)** The BASE of the fee. Used only in PER_X_KG type rate bases.

:TRUCK_TYPE:
  **(required)** The truck type of the rate.

:DIRECTION:
  **(required)** The direction of the rate.

:CARGO_CLASS:
  **(required)** The cargo_class of the rate.

:SERVICE:
  **(required)** The service of the rate.  If omitted default value of 'standard'  is used.

:CARRIER:
  **(required)** The CARRIER of the rate.  If omitted default value of the Organization's name is used.

:LOAD_TYPE:
  **(required)** The Load Type of the rate. Either "cargo_item" or "container".

:EFFECTIVE_DATE:
  **(required)** The date this rate comes into effect. Defaults to today's date.

:EXPIRATION_DATE:
  **(required)** The date this rate stops being valid. Defaults to one year from todays date.

:LOAD_METERAGE_RATIO:
  **(required)** The ratio for converting load meters into kg.

:LOAD_METERAGE_STACKABLE_LIMIT:
  **(required)** The watershed for applying load meterage calculations when cargo is stackable.

:LOAD_METERAGE_NON_STACKABLE_LIMIT:
  **(required)** The watershed for applying load meterage calculations when cargo is non-stackable.

:LOAD_METERAGE_HARD_LIMIT:
  **(required)** Raise an error if the cargo passes the LIMIT defined for the stackable type.

:LOAD_METERAGE_STACKABLE_TYPE:
  **(required)** The type of load meterage calculations to use for stackable cargo.

:LOAD_METERAGE_NON_STACKABLE_TYPE:
  **(required)** The type of load meterage calculations to use for non-stackable cargo.


Uploading a sheet
-----------------

To upload the Companies sheet, first log in as ad Admin then make your way to
the Clients page. In the Upload Data box click "Upload Companies". After the
upload completes you will receive an email with the results of the process.
